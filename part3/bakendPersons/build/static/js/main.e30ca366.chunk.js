(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{29:function(e,n,t){},30:function(e,n,t){},54:function(e,n,t){"use strict";t.r(n);var a=t(2),r=t.n(a),c=t(21),i=t.n(c),o=(t(29),t(8)),s=t(5),l=t(3),u=(t(30),t(6)),d=t.n(u),j=t(0),b=function(e){var n=e.persons,t=e.handleDelete;return Object(j.jsx)("div",{className:"list",children:Object(j.jsx)("ul",{children:n.map((function(e){return e.id&&Object(j.jsxs)("li",{className:"li-person",id:e.id,children:[Object(j.jsxs)("span",{className:"data-person",children:["\ud83d\udc64 ",(n=e.name,n&&n.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "))]}),Object(j.jsxs)("span",{className:"data-person",children:["\ud83d\udcde ",e.number]}),Object(j.jsx)("button",{onClick:t,children:"\u274c"})]},e.id);var n}))})})},h=function(e){var n=e.newPerson,t=e.handleChange,a=e.handleSubmit;return Object(j.jsxs)("form",{className:"form",children:[Object(j.jsxs)("label",{children:[" Name:",Object(j.jsx)("input",{required:!0,onChange:t,name:"name",value:n.name})]}),Object(j.jsxs)("label",{children:[" Number:",Object(j.jsx)("input",{required:!0,onChange:t,name:"number",value:n.number})]}),Object(j.jsx)("button",{onClick:a,children:"Add"})]})},m=function(e){var n=e.submitFilter,t=e.changeFilter;return Object(j.jsxs)("form",{onSubmit:n,children:[Object(j.jsx)("label",{children:"Filter show with"}),Object(j.jsx)("input",{onChange:t})]})};function f(e){var n=e.filterList,t=e.handleDelete;return Object(j.jsx)(b,{persons:n,handleDelete:t})}var O=function(e){var n=e.keyNoti;if(null===n)return null;var t=n.key,a=n.name;return Object(j.jsx)(j.Fragment,{children:void 0!==t&&Object(j.jsx)("div",{className:t,children:"add"===t?Object(j.jsxs)("p",{children:["Added ",a]}):"error"===t&&Object(j.jsxs)("p",{children:[a," was already removed from server"]})})})};var p=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)({name:"",number:"",id:null}),i=Object(l.a)(c,2),u=i[0],p=i[1],v=Object(a.useState)(!1),x=Object(l.a)(v,2),g=x[0],w=x[1],C=Object(a.useState)(""),k=Object(l.a)(C,2),N=k[0],S=k[1],F=Object(a.useState)([]),L=Object(l.a)(F,2),y=L[0],D=L[1],A=Object(a.useState)({}),P=Object(l.a)(A,2),E=P[0],T=P[1];Object(a.useEffect)((function(){function e(){d.a.get("api/people").then((function(e){var n=e.data;r(n),w(!1),T({})}))}e(),g&&e()}),[g]);var B=function(e){var n=e.target,t=n.name,a=n.value;p((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},t,a))}))};return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(O,{keyNoti:E}),Object(j.jsx)("h1",{children:"Phone Book"}),Object(j.jsx)(m,{changeFilter:function(e){var n=e.target.value;S(n)},submitFilter:function(e){e.preventDefault();var n=t.filter((function(e){return e.name.toLowerCase().startsWith(N.toLowerCase())&&e}));D(n)}}),Object(j.jsx)("h2",{children:"Add a new person"}),Object(j.jsx)(h,{newPerson:u,handleChange:B,handleSubmit:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===u.name.toLocaleLowerCase()}));if(void 0!==n[0]){var a=n[0],c=a.name,i=a.id;window.confirm(" ".concat(c," is already added to the notebook, replace the old number with the new one."))?d.a.put("api/people/".concat(i),{number:u.number}).then((function(){return p({name:"",number:"",id:null})})).then((function(){return w(!0)})):console.log("cancel")}else d.a.post("api/people",Object(s.a)(Object(s.a)({},u),{},{name:u.name.toLocaleLowerCase()})).then((function(e){return r(t.concat(e.data))})).then((function(){return p({name:"",number:"",id:null})})).then((function(){T({key:"add",name:u.name}),setTimeout((function(){w()}),2e3)}))}}),Object(j.jsx)("h2",{children:"Numbers"}),y.length>0?Object(j.jsx)(f,{filterList:y,handleChange:B}):Object(j.jsx)(b,{persons:t,handleDelete:function(e){e.preventDefault();var n=e.target.parentElement.firstChild.lastChild.data;if(window.confirm(" delete ".concat(n," ?"))){var a=e.target.parentElement.id;d.a.delete("api/people/".concat(a)).then((function(){return r(t.filter((function(e){return e.id!==a})))})).catch((function(){T({key:"error",name:n}),setTimeout((function(){w()}),2e3)}))}else console.log("cancel")}})]})})},v=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,55)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),a(e),r(e),c(e),i(e)}))};i.a.createRoot(document.getElementById("root")).render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(p,{})})),v()}},[[54,1,2]]]);
//# sourceMappingURL=main.e30ca366.chunk.js.map